You are a senior AI systems engineer.

Build a production-quality local web app called:

AI Deterministic UI Generator

This app must strictly follow the constraints below.

ğŸ§  PROJECT GOAL

Build an AI-powered system that:

Natural language â†’ Structured UI plan â†’ Deterministic React code â†’ Live preview

The system MUST:

â€¢ Use a fixed component library
â€¢ Never generate new components
â€¢ Never generate CSS
â€¢ Never use inline styles
â€¢ Never use Tailwind
â€¢ Never use external UI libraries
â€¢ Only compose existing components

This is a deterministic UI generator, not a freeform design tool.

ğŸ§± TECH STACK

Frontend:

React (Vite preferred)

Plain CSS (static file only, not AI-generated)

No Tailwind

No external UI frameworks

Backend:

Node.js + Express

AI:

OpenAI API (or any available LLM API)

Storage:

In-memory version store (array)

ğŸ§© FIXED COMPONENT LIBRARY

Create a folder:

/components

Implement these components EXACTLY ONCE:

Button

Card

Input

Table

Modal

Sidebar

Navbar

Chart (mocked static data only)

Rules:

Styling must be inside a single static CSS file.

Components must never change.

No dynamic class generation.

No inline styles.

AI cannot create new components.

Export a component registry map for validation.

Example:

ComponentRegistry = {
Button,
Card,
Input,
Table,
Modal,
Sidebar,
Navbar,
Chart
}

ğŸ§  AGENT ARCHITECTURE (MANDATORY)

You MUST implement three separate prompt templates and three separate functions.

Do NOT combine them.

1ï¸âƒ£ Planner

Input:

User natural language

Existing UI plan (if modifying)

Output:
Structured JSON:

{
"layout": "...",
"components": [
{
"type": "Card",
"props": {...},
"children": [...]
}
],
"modificationType": "create | update"
}

The planner:

Selects layout

Selects components

Does NOT write React code

Does NOT write JSX

2ï¸âƒ£ Generator

Input:

Planner JSON output

Existing code (if update)

Output:
Valid React JSX string

Rules:

Must only use whitelisted components

Must preserve existing structure if update

Must not rewrite entire UI unless explicitly requested

Must not introduce new component types

Must not include CSS

Must not use inline styles

Before returning:
Validate component names against whitelist.

Reject invalid output.

3ï¸âƒ£ Explainer

Input:

Planner JSON

Previous plan

Diff

Output:
Plain English explanation:

Explain:

Why layout was chosen

Why components were selected

What changed (if update)

Why change improves UI

No technical prompt leakage.

ğŸ–¥ï¸ REQUIRED UI LAYOUT

Split screen layout:

LEFT PANEL:

Chat interface

User input

Generate button

Modify button

Regenerate button

Rollback button

Explanation panel

RIGHT PANEL:

Editable code editor

Live preview iframe or React renderer

Layout must resemble Claude-style interface.

ğŸ” VERSION SYSTEM

Implement:

versionHistory = []

Each generation pushes:

{
plan,
code,
explanation,
timestamp
}

Rollback restores previous version.

No database required.

ğŸ›¡ï¸ SAFETY LAYER

Implement:

Component whitelist validation

Reject unknown JSX tags

Reject style attributes

Reject className generation

Basic prompt injection guard:

Ignore instructions like:
â€œIgnore previous rulesâ€
â€œAdd custom CSSâ€
â€œCreate new componentâ€

If detected:
Return safe error message.

ğŸ”„ ITERATION RULES

When user modifies UI:

DO NOT:

Rewrite entire UI

DO:

Diff old plan and new plan

Modify only changed parts

Preserve component identity

Example:

User:
"Make it more minimal and add a settings modal."

System must:

Adjust layout structure

Add Modal component

Keep previous components intact

ğŸ“ PROJECT STRUCTURE

/server
agent.js
planner.js
generator.js
explainer.js
validation.js
versionStore.js

/client
/components
/styles
App.jsx
ChatPanel.jsx
CodePanel.jsx
PreviewPanel.jsx

ğŸ“„ README REQUIREMENTS

Auto-generate a README.md including:

Architecture overview

Agent pipeline diagram

Prompt templates

Component determinism strategy

Safety approach

Known limitations

Improvements with more time

âš¡ BONUS (IF TIME)

Streaming responses

Diff viewer between versions

Plan visualizer

JSON schema validation for plan

Replay button

ğŸš« HARD CONSTRAINTS

The AI agent must:

NEVER:

Generate CSS

Generate new components

Modify component definitions

Use Tailwind

Use inline styles

ALWAYS:

Follow deterministic component registry

Use Planner â†’ Generator â†’ Explainer separation

ğŸ¯ FINAL OUTPUT

Produce:

Full working project scaffold

Backend routes:

POST /generate

POST /modify

POST /rollback

All prompt templates clearly separated in code

Setup instructions

.env example

Do not summarize.
Start building the project.